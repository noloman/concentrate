sudo: required
language: android
jdk:
- oraclejdk8
android:
  components:
  - tools
  - tools
  - platform-tools
  - build-tools-25.0.2
  - android-25
  - extra-android-m2repository
  - extra-android-support
deploy:
  provider: firebase
  token:
    secure: "NPEjagUSPS1mbgFadIVdqAfPXsK7CQvsB8XHn0yrF5weW3ZKVqTYYcthz5K8ti8BMbUHfgnJY6g79Sl6ueoum1irtdBYSAtTyzUG9lyPNuOfpVHjoks1O7DfxG5DnWWR+U2XG2gofmk6h9y8pSINrWB3lVPFkUejsjtGJrxhAvQ6SVCel/CI+1EElsDdIxQjOiJMzHS3reWLnaJJDC0U0RhcMBhLPNf8dWB4CcBuNsRAikTvo4mRXQfmih2DyxuihUszdLwvfY4+qw8yxzmaK9bnoj4YSTE8zMYS5ruSL4g4Fu48NxVx9VvagABqnmJ+6tvdomfaEV5C8CAuaPHNs5753MOgmqxzl1BrsnzsrDxlG9jrnVfh+Omf1mHwpglENyZP32iqZv1H9rWu5CHaDEW7+oa/6iaSthi5s1HxoC6oXEzEEAH6b0iivi/JFGR7kDYtiPPgGF27GB3hfGyxaqWYX/E1Ks1p4wAgzghGXSZZ6P6FxFJz7phmK4lV304qtDMRuaLQ3lmTrK1CRqegUTfBVEB4wufkHzCCOquqrHhHjTprJImIsdpL0/i6nfdLPaxgLuwbndaysbmk0kLpRGri4IJ1WJYLym2++5Y+gOC2kpbEqcD4Uh9/19WhtEO452CQXs6nZqj4tspPsSaK/QSCn4Uc2lMsWmOJ5fTdRAY="
script:
- "./gradlew build connectedCheck"
before_script:
  - echo no | android create avd --force -n test -t android-21 --abi armeabi-v7a
  - emulator -avd test -no-audio -no-window &
  - android-wait-for-emulator
  - adb shell input keyevent 82 &
before_install:
- openssl aes-256-cbc -K $encrypted_a247e207d762_key -iv $encrypted_a247e207d762_iv
  -in keystore.properties.enc -out keystore.properties -d
